# sdk架构设计

## 什么是sdk

sdk的全称是software development kit，翻译过来是软件开发工具包，这是一种被用来辅助开发某类软件而编写的特定软件包，其主要是为宿主系统提供服务的。
😕 好书面呀，我们不妨这样想**SDK = 给程序员用的「百宝箱」**
比如你想开发一款微信小程序，微信官方会给你一个SDK。这个箱子里有：

* 📦 小程序专用零件（API接口）
* 📖 拼装说明书（开发文档）
* 🧩 示例模型（示例代码）
* 🛠️ 组装工具（调试工具）

​**如果我们想做「微信支付」功能**​：

* ❌ 没SDK：研究怎么和银行系统对接，处理安全漏洞
* ✅ 有SDK：用**`wx.requestPayment()`** 直接弹出微信支付窗口，用户输密码就完事

## 架构设计

sdk架构设计主要需要考虑**易用性**、**可拓展性**和**性能**等方面，常见的sdk架构设计是模块化架构：将不同功能模块拆分成独立的组件，实现**热插拔**机制，同时可以配合主线程的生命周期进行精准控制插件的相关执行逻辑。

避免依赖第三方库
避免与集成方由于使用相同的三方库引起冲突 ➡️ 出现问题可能导致排查困难
三方库会不断更新，如果引入三方库，sdk需要及时保持更新，增加额外工作量

## 设计初衷

- 可以减少人力成本和开发的时间
- 共享一套代码，便于后期维护

sdk体积优化
监控sdk通常作为第一个脚本被加载到页面中，体积膨胀会增加用户下载时间以及浏览器解析脚本的时间。对于优化sdk的体积，可以从宏观和微观两个角度来看。
微观上，尽量去精简代码，剥离冗余重复的代码。
1. 减少过多的class和过长的属性方法名
class的定义会被转换成function声明+prototype赋值，以及常用代码压缩工具无法对object属性名压缩，过多的面向对象写法会让编译后的js代码体积膨胀得非常快。
```
class ClassWithLongName {
    methodWithALongLongName() {}
}
```

